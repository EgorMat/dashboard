{"remainingRequest":"D:\\dashboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dashboard\\src\\components\\CompaniesTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dashboard\\src\\components\\CompaniesTable.vue","mtime":1545850274535},{"path":"D:\\dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1537776599066},{"path":"D:\\dashboard\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1537776599066},{"path":"D:\\dashboard\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport TableRow from './TableRow.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'CompaniesTable',\r\n  components: {\r\n    TableRow\r\n  },\r\n  data(){\r\n    return {\r\n      data: [],\r\n      headers: {\r\n        \"name\": \"Клиент\",\r\n        \"turnaround\": \"Обор\",\r\n         \"part_in_brand\": \"Доля в бренде\",\r\n         \"target\": \"Target\",\r\n         \"matrix\": \"Матрица\",\r\n         \"stok_qt\": \"stok(шт)\",\r\n         \"stock_per\": \"stok(%)\",\r\n         \"sell_out\": \"Sell Out\",\r\n         \"ytd\": \"YTD\",\r\n         \"trend\": \"trend\"\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCompanies(){\r\n      axios({\r\n        method: \"get\",\r\n        url: \"https://luxb.news-mts.ru/api/v1/lists/companies\",\r\n        headers: {\r\n          'X-Token' : 'ba8c2a64576b4f0fb2cd206f959dabd9'\r\n        }\r\n      }).then((resp) => {\r\n        this.companies = resp.data;\r\n        for (let i = 0; i<=this.companies.length-1; i++){\r\n          axios({\r\n            method: \"get\",\r\n            url: \"https://luxb.news-mts.ru/api/v1/tables/companies/\" + resp.data[i].id,\r\n            headers: {\r\n              'X-Token' : 'ba8c2a64576b4f0fb2cd206f959dabd9'\r\n              // this.$store.getters.getToken\r\n            }\r\n        })\r\n        .then((resp)=>{\r\n          this.data.push(Object.assign({}, this.companies[i], resp.data))\r\n            // this.companies = resp.data\r\n        })\r\n      }\r\n              });\r\n    },\r\n\r\n    headerClick(id, name){\r\n      this.$router.push({name: 'doors', params: {companyId : id}})\r\n      this.$store.dispatch('addNavItem', name)\r\n    }\r\n  },\r\n  created(){\r\n    this.$store.dispatch('changeIsTable', true).then(()=>{\r\n      this.getCompanies();\r\n    })\r\n\r\n  }\r\n\r\n}\r\n",{"version":3,"sources":["CompaniesTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"CompaniesTable.vue","sourceRoot":"src\\components","sourcesContent":["<template>\r\n  <div class=\"tableWrap\">\r\n    <TableRow :data=\"headers\" :name=\"headers.name\" class=\"headers\" />\r\n    <TableRow v-for=\"item in data\"\r\n              :data=\"item\"\r\n              :id=\"item.id\"\r\n              :name=\"item.name\"\r\n              :showOrder=\"true\"\r\n              v-on:headerClick=\"headerClick\"\r\n              :key=\"item.id\"/>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport TableRow from './TableRow.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'CompaniesTable',\r\n  components: {\r\n    TableRow\r\n  },\r\n  data(){\r\n    return {\r\n      data: [],\r\n      headers: {\r\n        \"name\": \"Клиент\",\r\n        \"turnaround\": \"Обор\",\r\n         \"part_in_brand\": \"Доля в бренде\",\r\n         \"target\": \"Target\",\r\n         \"matrix\": \"Матрица\",\r\n         \"stok_qt\": \"stok(шт)\",\r\n         \"stock_per\": \"stok(%)\",\r\n         \"sell_out\": \"Sell Out\",\r\n         \"ytd\": \"YTD\",\r\n         \"trend\": \"trend\"\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCompanies(){\r\n      axios({\r\n        method: \"get\",\r\n        url: \"https://luxb.news-mts.ru/api/v1/lists/companies\",\r\n        headers: {\r\n          'X-Token' : 'ba8c2a64576b4f0fb2cd206f959dabd9'\r\n        }\r\n      }).then((resp) => {\r\n        this.companies = resp.data;\r\n        for (let i = 0; i<=this.companies.length-1; i++){\r\n          axios({\r\n            method: \"get\",\r\n            url: \"https://luxb.news-mts.ru/api/v1/tables/companies/\" + resp.data[i].id,\r\n            headers: {\r\n              'X-Token' : 'ba8c2a64576b4f0fb2cd206f959dabd9'\r\n              // this.$store.getters.getToken\r\n            }\r\n        })\r\n        .then((resp)=>{\r\n          this.data.push(Object.assign({}, this.companies[i], resp.data))\r\n            // this.companies = resp.data\r\n        })\r\n      }\r\n              });\r\n    },\r\n\r\n    headerClick(id, name){\r\n      this.$router.push({name: 'doors', params: {companyId : id}})\r\n      this.$store.dispatch('addNavItem', name)\r\n    }\r\n  },\r\n  created(){\r\n    this.$store.dispatch('changeIsTable', true).then(()=>{\r\n      this.getCompanies();\r\n    })\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n.tableWrap{\r\n  position: absolute;\r\n  top: 70px;\r\n  width: 100%;\r\n}\r\n</style>\r\n"]}]}